{"version":3,"file":"commonHelpers.js","sources":["../src/cat-api.js","../src/index.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY =\n  'live_gx5mwTdpktLl6xdhpuQw9kTaTAevrcrANhMNGA6mvTxfxagdtdDbekzlyo3sTKhz';\n\n// axios.defaults.headers.common['x-api-key'] = API_KEY;\n\nconst BASE_URL = 'https://api.thecatapi.com/v1';\nconst ENDPOINT_BREEDS = '/breeds';\nconst ENDPOINT_IMG_SEARCH = '/images/search';\n\nfunction fetchBreed() {\n  return fetch(`${BASE_URL}${ENDPOINT_BREEDS}`)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(`${response.status} - ${response.statusText}`);\n      }\n      return response.json();\n    })\n    .catch(err => console.log(err));\n}\n\nfunction fetchCatByBreed(breedId = '') {\n  const params = new URLSearchParams({\n    breed_ids: breedId,\n    api_key: API_KEY,\n  });\n\n  return fetch(`${BASE_URL}${ENDPOINT_IMG_SEARCH}?${params}`)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(`${response.status} - ${response.statusText}`);\n      }\n      return response.json();\n    })\n    .catch(err => console.log(err));\n}\n\nexport { fetchBreed, fetchCatByBreed };\n","import SlimSelect from 'slim-select';\nimport iziToast from 'izitoast';\nimport { fetchBreed, fetchCatByBreed } from './cat-api';\n\nimport '../node_modules/slim-select/dist/slimselect.css';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst elements = {\n  select: document.querySelector('.breed-select'),\n  msgLoader: document.querySelector('.loader-text'),\n  loader: document.querySelector('.loader'),\n  msgError: document.querySelector('.error'),\n  catInfo: document.querySelector('.cat-info'),\n};\n\n// elements.select.addEventListener('change', handlerSelect);\n\nfetchBreed()\n  .then(data => {\n    elements.select.insertAdjacentHTML('afterbegin', selectMarkup(data));\n    elements.select.classList.remove('hidden');\n    elements.msgLoader.classList.add('hidden');\n    elements.loader.classList.add('hidden');\n\n    new SlimSelect({\n      select: elements.select,\n      events: {\n        afterChange: handlerSelect,\n      },\n    });\n  })\n  .catch(err => {\n    elements.msgLoader.classList.add('hidden');\n    elements.loader.classList.add('hidden');\n    new iziToast.error({\n      message: 'Oops! Something went wrong! Try reloading the page!',\n      position: 'topLeft',\n      icon: '',\n      messageColor: 'red',\n      backgroundColor: 'transparent',\n      displayMode: 0,\n      timeout: '',\n    });\n    console.log(err);\n  });\n\nfunction selectMarkup(array) {\n  return array\n    .map(({ id, name }) => `<option value=\"${id}\">${name}</option>`)\n    .join();\n}\n\nfunction handlerSelect() {\n  elements.msgLoader.classList.remove('hidden');\n  elements.loader.classList.remove('hidden');\n  elements.catInfo.classList.add('hidden');\n  fetchCatByBreed(elements.select.value)\n    .then(\n      ([\n        {\n          breeds: [{ name, temperament, description }],\n          url,\n        },\n      ]) => {\n        elements.catInfo.innerHTML = `\n        <img src=\"${url}\" alt=\"${name}\" class=\"cat-img\"/>\n        <div class=\"cat-info-text\">\n          <h2 class=\"cat-name\">${name}</h2>\n          <p class=\"cat-description\">${description}</p>\n          <p class=\"cat-temper\"><b>Temperament:</b> ${temperament}</p>\n        </div>`;\n        elements.msgLoader.classList.add('hidden');\n        elements.loader.classList.add('hidden');\n        elements.catInfo.classList.remove('hidden');\n      }\n    )\n    .catch(err => {\n      elements.msgLoader.classList.add('hidden');\n      elements.loader.classList.add('hidden');\n\n      iziToast.error({\n        message: 'Oops! Something went wrong! Try reloading the page!',\n        position: 'topLeft',\n        icon: '',\n        messageColor: 'red',\n        backgroundColor: 'white',\n        displayMode: 0,\n        timeout: '',\n      });\n      console.log(err);\n    });\n}\n"],"names":["API_KEY","BASE_URL","ENDPOINT_BREEDS","ENDPOINT_IMG_SEARCH","fetchBreed","response","err","fetchCatByBreed","breedId","params","elements","data","selectMarkup","SlimSelect","handlerSelect","iziToast","array","id","name","temperament","description","url"],"mappings":"6vBAEA,MAAMA,EACJ,wEAIIC,EAAW,+BACXC,EAAkB,UAClBC,EAAsB,iBAE5B,SAASC,GAAa,CACpB,OAAO,MAAM,GAAGH,IAAWC,GAAiB,EACzC,KAAKG,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAM,GAAGA,EAAS,YAAYA,EAAS,YAAY,EAE/D,OAAOA,EAAS,MACtB,CAAK,EACA,MAAMC,GAAO,QAAQ,IAAIA,CAAG,CAAC,CAClC,CAEA,SAASC,EAAgBC,EAAU,GAAI,CACrC,MAAMC,EAAS,IAAI,gBAAgB,CACjC,UAAWD,EACX,QAASR,CACb,CAAG,EAED,OAAO,MAAM,GAAGC,IAAWE,KAAuBM,GAAQ,EACvD,KAAKJ,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAM,GAAGA,EAAS,YAAYA,EAAS,YAAY,EAE/D,OAAOA,EAAS,MACtB,CAAK,EACA,MAAMC,GAAO,QAAQ,IAAIA,CAAG,CAAC,CAClC,CC7BA,MAAMI,EAAW,CACf,OAAQ,SAAS,cAAc,eAAe,EAC9C,UAAW,SAAS,cAAc,cAAc,EAChD,OAAQ,SAAS,cAAc,SAAS,EACxC,SAAU,SAAS,cAAc,QAAQ,EACzC,QAAS,SAAS,cAAc,WAAW,CAC7C,EAIAN,EAAY,EACT,KAAKO,GAAQ,CACZD,EAAS,OAAO,mBAAmB,aAAcE,EAAaD,CAAI,CAAC,EACnED,EAAS,OAAO,UAAU,OAAO,QAAQ,EACzCA,EAAS,UAAU,UAAU,IAAI,QAAQ,EACzCA,EAAS,OAAO,UAAU,IAAI,QAAQ,EAEtC,IAAIG,EAAW,CACb,OAAQH,EAAS,OACjB,OAAQ,CACN,YAAaI,CACd,CACP,CAAK,CACL,CAAG,EACA,MAAMR,GAAO,CACZI,EAAS,UAAU,UAAU,IAAI,QAAQ,EACzCA,EAAS,OAAO,UAAU,IAAI,QAAQ,EACtC,IAAIK,EAAS,MAAM,CACjB,QAAS,sDACT,SAAU,UACV,KAAM,GACN,aAAc,MACd,gBAAiB,cACjB,YAAa,EACb,QAAS,EACf,CAAK,EACD,QAAQ,IAAIT,CAAG,CACnB,CAAG,EAEH,SAASM,EAAaI,EAAO,CAC3B,OAAOA,EACJ,IAAI,CAAC,CAAE,GAAAC,EAAI,KAAAC,KAAW,kBAAkBD,MAAOC,YAAe,EAC9D,MACL,CAEA,SAASJ,GAAgB,CACvBJ,EAAS,UAAU,UAAU,OAAO,QAAQ,EAC5CA,EAAS,OAAO,UAAU,OAAO,QAAQ,EACzCA,EAAS,QAAQ,UAAU,IAAI,QAAQ,EACvCH,EAAgBG,EAAS,OAAO,KAAK,EAClC,KACC,CAAC,CACC,CACE,OAAQ,CAAC,CAAE,KAAAQ,EAAM,YAAAC,EAAa,YAAAC,CAAW,CAAE,EAC3C,IAAAC,CACD,CACT,IAAY,CACJX,EAAS,QAAQ,UAAY;AAAA,oBACjBW,WAAaH;AAAA;AAAA,iCAEAA;AAAA,uCACME;AAAA,sDACeD;AAAA,gBAE9CT,EAAS,UAAU,UAAU,IAAI,QAAQ,EACzCA,EAAS,OAAO,UAAU,IAAI,QAAQ,EACtCA,EAAS,QAAQ,UAAU,OAAO,QAAQ,CAC3C,CACF,EACA,MAAMJ,GAAO,CACZI,EAAS,UAAU,UAAU,IAAI,QAAQ,EACzCA,EAAS,OAAO,UAAU,IAAI,QAAQ,EAEtCK,EAAS,MAAM,CACb,QAAS,sDACT,SAAU,UACV,KAAM,GACN,aAAc,MACd,gBAAiB,QACjB,YAAa,EACb,QAAS,EACjB,CAAO,EACD,QAAQ,IAAIT,CAAG,CACrB,CAAK,CACL"}